<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AvaSchedule</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
  <link rel="stylesheet" href="/stylesheets/signin.css">
</head>
<nav class="navbar navbar-inverse bg-light">
  <div class="container">
    <span class="ava">AvaSchedule</span>
      <img src="/images/novo.iix" alt="" width="160" height="44">
  </div>
</nav>
<div style="margin-left: 40px; margin-bottom: 40px;">
  <a href="/logado/selecionar" class="btn btn-outline-danger btn-sm">
    <img src="/images/icons/home.svg" alt="home" width="40" height="44">
  </a>
</div>
<body class="cinza">
  <main>
    <section class="text-center">

      <h1>Listagem de Request</h1>
      <form action="" method="GET">
        <% if(filter){ %> 
      <input type="text" name="filter"  class="btn btn-outline-danger  btn-lg btn2" value="<%= filter %>">
      <% }else{ %> 
        <input type="text" name="filter"  class="btn btn-outline-danger  btn-lg btn2" placeholder="Buscar por VM Azure" >
        <% } %> 
          <button type="submit" class="btn btn-outline-danger"><img src="/images/icons/search.svg"
                  alt="Ícone de pesquisa"></button>
       

   <button type="button" class="btn btn-outline-danger">
      <a href="/logado/request/criar">
        <img src="/images/icons/icon-create-vm.svg" alt="Create icon"></a></button>
</form>
       
      <div class="listing">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead class="thead-dark">

              <% var page1 = page  %> 
              <nav aria-label="...">
                  <ul class="pagination">
                      <li class="page-item">
                          <a class="page-link" href="/logado/request/listing/<%= parseInt(page1) - 1 %>" tabindex="-1">Anterior</a>
                      </li>
                      <li class="page-item">
                          <a class="page-link" href="/logado/request/listing/<%= parseInt(page1) + 1 %>">Próximo</a>
                      </li>
                  </ul>
              </nav>

              <tr>
                <th scope="col">Dia</th>
                <th scope="col">Mês</th>
                <th scope="col">Ano</th>
                <th scope="col">VM Azure</th>
                <th scope="col">Hora IN</th>
                <th scope="col">Hora OUT</th>
                <th scope="col">Request</th>
                <th scope="col">Editar</th>
              </tr>
            </thead>
            <% for( let request of requests) { %>
              <tbody>
                <tr>
                  <td>
                    <%= request.dia%>
                  </td>
                  <td>
                    <%= request.mes%>
                  </td>
                  <td>
                    <%= request.ano %>
                  </td>
                  <td>
                    <%= request.vm.vm_azure %>
                  </td>
                  <td>
                    <%= request.hr_in %>
                  </td>
                  <td>
                    <%= request.hr_out %>
                  </td>
                  <td>
                    <%= request.request %>
                  </td>
                  <td> 
                      <a href="/logado/request/editar/<%= request.id%>">
                      <img src="/images/icons/edit.svg" alt="Ícone de edição">
                    </a>
                  </td>
                </tr>
              </tbody>
              <% } %>
          </table>
        </div>
      </div>
    </section>
  </main>
</body>
</html>